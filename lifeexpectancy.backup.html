<!DOCTYPE HTML>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Life Expectancy</title>

	<!--Stylesheet import for API page-->
	<link rel="stylesheet" href="css/apipage.css">

	<!--Stylesheet import for footer-->
	<link rel="stylesheet" href="css/footer.css">

	<!--Stylesheet import for navbar-->
	<link rel="stylesheet" href="css/navbar.css">

	<!--Bootstrap framework import-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
	</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
	</script>


	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	<!--<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">-->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/css/bootstrap-datepicker.css"
		rel="stylesheet">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>

<body>

	<div id="page">
		<div class="intro container">
			<section class="page-title">
				<h1>Life Expectancy Comparisor</h1>
			</section>

			<aside class="text desc text-justify">
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
					ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
					nisi ut
					aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
					cillum dolore eu
					fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
					deserunt mollit
					anim id est laborum.</p>

			</aside>
			<aside class="text tut text-justify">
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
					ut labore et dolore magna aliqua.</p>

				<a href="tutlifeexpectancy.html">
					<button type="button" class="btn btn-sm btn-outline-dark">Link to Tutorial Page</button>
				</a>
			</aside>
		</div>



		<div class="api-content container">

			<label for="date">Date of Birth</label>
			<input id="date" class="date-own form-control" type="text">


			<input type="radio" name="Gender" id="Male" value="Male">
			<label for="Male">Male</label>

			<input type="radio" name="Gender" id="Female" value="Female">
			<label for="Female">Female</label>
			<br>

			<input type="checkbox" name="UnitedKingdom" id="UnitedKingdom" value="United Kingdom">
			<label for="UnitedKingdom">United Kingdom</label>
			<br>

			<input type="checkbox" name="China" id="China" value="China">
			<label for="China">China</label>
			<br>

			<input type="checkbox" name="Afghanistan" id="Afghanistan" value="Afghanistan">
			<label for="Afghanistan">Afghanistan</label>
			<br>

			<input type="checkbox" name="UnitedStates" id="UnitedStates" value="United States">
			<label for="UnitedStates">United States</label>
			<br>

			<input type="checkbox" name="Spain" id="Spain" value="Spain">
			<label for="Spain">Spain</label>
			<br>

			<input type="checkbox" name="Sweden" id="Sweden" value="Sweden">
			<label for="Sweden">Sweden</label>
			<br>

			<input type="checkbox" name="Norway" id="Norway" value="Norway">
			<label for="Norway">Norway</label>
			<br>

			<input type="checkbox" name="Mexico" id="Mexico" value="Mexico">
			<label for="Mexico">Mexico</label>
			<br>

			<input type="checkbox" name="Japan" id="Japan" value="Japan">
			<label for="Japan">Japan</label>
			<br>

			<input type="checkbox" name="World" id="World" value="World">
			<label for="World">World</label>

			<br>
			<input type="button" name="Submit" id="Submit" value="Submit" />


			<div id="chart-container">
				<canvas id="myChart"></canvas>
			</div>

		</div>
	</div>

	<script>
		$('.date-own').datepicker({
			minViewMode: 2,
			format: 'yyyy'
		});

		$(document).ready(function () {
			//$("#chart-container").empty(); // removing previous canvas element
			//$("#chart-container").append('<canvas id="myChart" class="myChart"></canvas>');
			var ChartData = [];
			var ChartTitle = [];
			var ctx = document.getElementById('myChart');
			myChart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: ChartTitle,
					datasets: [{
						label: '# of Votes',
						data: ChartData,
						backgroundColor: [
							'rgba(255, 99, 132, 0.2)',
							'rgba(54, 162, 235, 0.2)',
							'rgba(255, 206, 86, 0.2)',
							'rgba(75, 192, 192, 0.2)',
							'rgba(153, 102, 255, 0.2)',
							'rgba(255, 159, 64, 0.2)'
						],
						borderColor: [
							'rgba(255, 99, 132, 1)',
							'rgba(54, 162, 235, 1)',
							'rgba(255, 206, 86, 1)',
							'rgba(75, 192, 192, 1)',
							'rgba(153, 102, 255, 1)',
							'rgba(255, 159, 64, 1)'
						],
						borderWidth: 1
					}]
				},
				options: {
					scales: {
						yAxes: [{
							ticks: {
								beginAtZero: true
							}
						}]
					}
				}
			});
			$("#Submit").click(function () {
				//$("#chart-container").empty(); // removing previous canvas element
				var ChartData = [];
				var ChartTitle = [];
				var UnitedKingdom;
				var China;
				var Afghanistan;
				var UnitedStates;
				var Spain;
				var Sweden;
				var Norway;
				var Mexico;
				var Japan;
				var World;
				var dob = $('#date').val() + "-01-1";
				console.log(dob)
				if (document.getElementById('Male').checked) {
					if (document.getElementById('UnitedKingdom').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/United%20Kingdom/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								UnitedKingdom = data.total_life_expectancy;
								ChartData.push(UnitedKingdom);
								ChartTitle.push("United Kingdom");
							}
						});
					};
					if (document.getElementById('China').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/China/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								China = data.total_life_expectancy;
								ChartData.push(China);
								ChartTitle.push("China");
							}
						});
					};
					if (document.getElementById('Afghanistan').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/Afghanistan/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Afghanistan = data.total_life_expectancy;
								ChartData.push(Afghanistan);
								ChartTitle.push("Afghanistan");

							}
						});
					};
					if (document.getElementById('UnitedStates').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/United%20States/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								UnitedStates = data.total_life_expectancy;
								ChartData.push(UnitedStates);
								ChartTitle.push("United States");

							}
						});
					};
					if (document.getElementById('Spain').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/Spain/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Spain = data.total_life_expectancy;
								ChartData.push(Spain);
								ChartTitle.push("Spain");

							}
						});
					};
					if (document.getElementById('Sweden').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/Sweden/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Sweden = data.total_life_expectancy;
								ChartData.push(Sweden);
								ChartTitle.push("Sweden");
							}
						});
					};
					if (document.getElementById('Norway').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/Norway/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Norway = data.total_life_expectancy;
								ChartData.push(Norway);
								ChartTitle.push("Norway");
							}
						});
					};
					if (document.getElementById('Mexico').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/Mexico/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Mexico = data.total_life_expectancy;
								ChartData.push(Mexico);
								ChartTitle.push("Mexico");
							}
						});
					};
					if (document.getElementById('Japan').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/Japan/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Japan = data.total_life_expectancy;
								ChartData.push(Japan);
								ChartTitle.push("Japan");
							}
						});
					};
					if (document.getElementById('World').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/male/World/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								World = data.total_life_expectancy;
								ChartData.push(World);
								ChartTitle.push("World");
							}
						});
					};
					//console.log(ChartData);
					//console.log(ChartTitle);
				};

				if (document.getElementById('Female').checked) {
					if (document.getElementById('UnitedKingdom').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/United%20Kingdom/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								UnitedKingdom = data.total_life_expectancy;
								ChartData.push(UnitedKingdom);
								ChartTitle.push("United Kingdom");
							}
						});
					}
					if (document.getElementById('China').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/China/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								China = data.total_life_expectancy;
								ChartData.push(China);
								ChartTitle.push("China");
							}
						});
					}
					if (document.getElementById('Afghanistan').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/Afghanistan/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Afghanistan = data.total_life_expectancy;
								ChartData.push(Afghanistan);
								ChartTitle.push("Afghanistan");
							}
						});
					}
					if (document.getElementById('UnitedStates').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/United%20States/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								UnitedStates = data.total_life_expectancy;
								ChartData.push(UnitedStates);
								ChartTitle.push("United States");
							}
						});
					}
					if (document.getElementById('Spain').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/Spain/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Spain = data.total_life_expectancy;
								ChartData.push(Spain);
								ChartTitle.push("Spain");
							}
						});
					}
					if (document.getElementById('Sweden').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/Sweden/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Sweden = data.total_life_expectancy;
								ChartData.push(Sweden);
								ChartTitle.push("Sweden");
							}
						});
					}
					if (document.getElementById('Norway').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/Norway/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Norway = data.total_life_expectancy;
								ChartData.push(Norway);
								ChartTitle.push("Norway");
							}
						});
					}
					if (document.getElementById('Mexico').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/Mexico/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Mexico = data.total_life_expectancy;
								ChartData.push(Mexico);
								ChartTitle.push("Mexico");
							}
						});
					}
					if (document.getElementById('Japan').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/Japan/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								Japan = data.total_life_expectancy;
								ChartData.push(Japan);
								ChartTitle.push("Japan");
							}
						});
					}
					if (document.getElementById('World').checked) {
						$.ajax({
							type: "GET",
							url: "http://api.population.io:80/1.0/life-expectancy/total/Female/World/" +
								dob,
							dataType: "json",
							success: function (data) {
								console.log(data);
								World = data.total_life_expectancy;
								ChartData.push(World)
								ChartTitle.push("World");
							}
						});
					}
				}

				function updateConfigByMutating(chart) {
					chart.config.data;
					chart.datasets[0].data = ChartData;
					chart.labels = ChartTitle;
					chart.update();
				}

			});
		});
	</script>
	<!--Link to local Javascript file-->
	<script type="text/javascript" src="js/lifeExpectancy.js"></script>


	<div id="navbar">
		<!--Import Navbar file onto page-->
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="js/navbar.js"></script>
	</div>

	<!-- <div id="footer">
		Import Footer file onto page
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="js/footer.js"></script>
	</div> -->

</body>

</html>